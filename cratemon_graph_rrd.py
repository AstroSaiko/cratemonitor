#!/usr/bin/env python

###############################################################################

import os
import socket
import sys

import pdb
import rrdtool

###############################################################################

if __name__ == "__main__":

	filepath = '/home/xtaldaq/cratemonitor_v3/'
	for rack in ['s1g01', 's1g03', 's1g04']:
		for crate in ['18', '27','36','45']:
		
			for sched in ['daily' , 'weekly', 'monthly']:
				if sched == 'weekly':
					period = 'w'
				elif sched == 'daily':
					period = 'd'
				elif sched == 'monthly':
					period = 'm'
			#For the MCH databases
				ret = rrdtool.graph( "{0}png/{1}-{2}-{3}-mchtemp.png".format(filepath,rack,crate,period), 
						     "--start", "-1{0}".format(period), 
						     "--vertical-label=Temperature (degC)",
						     "-w 400", "-h 240",
						     #"--slope-mode",
						     "-t Crate {0}-{1}".format(str.upper(rack), str.upper(crate)),
						     "DEF:t1={0}rrd/mch-{1}-{2}.rrd:AMC1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t2={0}rrd/mch-{1}-{2}.rrd:AMC2temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t3={0}rrd/mch-{1}-{2}.rrd:AMC3temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t4={0}rrd/mch-{1}-{2}.rrd:AMC4temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t5={0}rrd/mch-{1}-{2}.rrd:AMC5temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t6={0}rrd/mch-{1}-{2}.rrd:AMC6temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t7={0}rrd/mch-{1}-{2}.rrd:AMC7temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t8={0}rrd/mch-{1}-{2}.rrd:AMC8temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t9={0}rrd/mch-{1}-{2}.rrd:AMC9temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t10={0}rrd/mch-{1}-{2}.rrd:AMC10temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t11={0}rrd/mch-{1}-{2}.rrd:AMC11temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t12={0}rrd/mch-{1}-{2}.rrd:AMC12temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t13={0}rrd/mch-{1}-{2}.rrd:AMC13temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t14={0}rrd/mch-{1}-{2}.rrd:CU1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t15={0}rrd/mch-{1}-{2}.rrd:CU2temp:AVERAGE".format(filepath,rack,crate),
						     "LINE:t1#000000:AMC1",
						     "LINE:t2#FF0000:AMC2",
						     "LINE:t3#FF6600:AMC3",
						     "LINE:t4#FFFF00:AMC4",
						     "LINE:t5#99CC00:AMC5",
						     "LINE:t6#00FF00:AMC6",
						     "LINE:t7#00CC99:AMC7",
						     "LINE:t8#0099CC:AMC8",
						     "LINE:t9#0000FF:AMC9",
						     "LINE:t10#6600FF:AMC10",
						     "LINE:t11#FF00FF:AMC11",
						     "LINE:t12#FF0099:AMC12",
						     "LINE:t13#FF99CC:AMC13",
						     "LINE:t14#CC0000:CU1",
						     "LINE:t15#660000:CU2")
			
				ret = rrdtool.graph( "{0}png/{1}-{2}-{3}-curr.png".format(filepath,rack,crate,period), 
						     "--start", "-1{0}".format(period), 
						     "--vertical-label=Current 1V (A)",
						     "-w 400", "-h 215",
						     "--upper-limit=3.0", "--lower-limit=0.0","--rigid",
						     "-t Crate {0}-{1}".format(str.upper(rack), str.upper(crate)),
						     "DEF:t1={0}rrd/mch-{1}-{2}.rrd:AMC1curr1V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t2={0}rrd/mch-{1}-{2}.rrd:AMC2curr1V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t3={0}rrd/mch-{1}-{2}.rrd:AMC3curr1V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t4={0}rrd/mch-{1}-{2}.rrd:AMC4curr1V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t5={0}rrd/mch-{1}-{2}.rrd:AMC5curr1V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t6={0}rrd/mch-{1}-{2}.rrd:AMC6curr1V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t7={0}rrd/mch-{1}-{2}.rrd:AMC7curr1V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t8={0}rrd/mch-{1}-{2}.rrd:AMC8curr1V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t9={0}rrd/mch-{1}-{2}.rrd:AMC9curr1V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t10={0}rrd/mch-{1}-{2}.rrd:AMC10curr1V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t11={0}rrd/mch-{1}-{2}.rrd:AMC11curr1V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t12={0}rrd/mch-{1}-{2}.rrd:AMC12curr1V0:AVERAGE".format(filepath,rack,crate),
						     "CDEF:t1cal=t1,1.88,/",
						     "CDEF:t2cal=t2,1.88,/",
						     "CDEF:t3cal=t3,1.88,/",
						     "CDEF:t4cal=t4,1.88,/",
						     "CDEF:t5cal=t5,1.88,/",
						     "CDEF:t6cal=t6,1.88,/",
						     "CDEF:t7cal=t7,1.88,/",
						     "CDEF:t8cal=t8,1.88,/",
						     "CDEF:t9cal=t9,1.88,/",
						     "CDEF:t10cal=t10,1.88,/",
						     "CDEF:t11cal=t11,1.88,/",
						     "CDEF:t12cal=t12,1.88,/",
						     "VDEF:t1avg=t1cal,LAST",
						     "VDEF:t2avg=t2cal,LAST",
						     "VDEF:t3avg=t3cal,LAST",
						     "VDEF:t4avg=t4cal,LAST",
						     "VDEF:t5avg=t5cal,LAST",
						     "VDEF:t6avg=t6cal,LAST",
						     "VDEF:t7avg=t7cal,LAST",
						     "VDEF:t8avg=t8cal,LAST",
						     "VDEF:t9avg=t9cal,LAST",
						     "VDEF:t10avg=t10cal,LAST",
						     "VDEF:t11avg=t11cal,LAST",
						     "VDEF:t12avg=t12cal,LAST",
						     "LINE:t1cal#000000:AMC1",
						     "GPRINT:t1avg:  %4.1lf %SA    ",
						     "LINE:t2cal#FF0000:AMC2",
						     "GPRINT:t2avg:  %4.1lf %SA    ",
						     "LINE:t3cal#FF6600:AMC3",
						     "GPRINT:t3avg:  %4.1lf %SA\l",
						     "LINE:t4cal#FFFF00:AMC4",
						     "GPRINT:t4avg:  %4.1lf %SA    ",
						     "LINE:t5cal#99CC00:AMC5",
						     "GPRINT:t5avg:  %4.1lf %SA    ",
						     "LINE:t6cal#00FF00:AMC6",
						     "GPRINT:t6avg:  %4.1lf %SA\l",
						     "LINE:t7cal#00CC99:AMC7",
						     "GPRINT:t7avg:  %4.1lf %SA    ",
						     "LINE:t8cal#0099CC:AMC8",
						     "GPRINT:t8avg:  %4.1lf %SA    ",
						     "LINE:t9cal#0000FF:AMC9",
						     "GPRINT:t9avg:  %4.1lf %SA\l",
						     "LINE:t10cal#6600FF:AMC10",
						     "GPRINT:t10avg:%2.1lf %SA  ",
						     "LINE:t11cal#FF00FF:AMC11",
						     "GPRINT:t11avg:%2.1lf %SA ",
						     "LINE:t12cal#FF0099:AMC12",
						     "GPRINT:t12avg:%2.1lf %SA")
			
				ret = rrdtool.graph( "{0}png/{1}-{2}-{3}-12curr.png".format(filepath,rack,crate,period), 
						     "--start", "-1{0}".format(period), 
						     "--vertical-label=12V Current (A)",
						     "-w 400", "-h 215",
						     "--upper-limit=3.0", "--lower-limit=0.0","--rigid",
						     "-t Crate {0}-{1}".format(str.upper(rack), str.upper(crate)),
						     "DEF:t1={0}rrd/mch-{1}-{2}.rrd:AMC1curr12V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t2={0}rrd/mch-{1}-{2}.rrd:AMC2curr12V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t3={0}rrd/mch-{1}-{2}.rrd:AMC3curr12V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t4={0}rrd/mch-{1}-{2}.rrd:AMC4curr12V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t5={0}rrd/mch-{1}-{2}.rrd:AMC5curr12V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t6={0}rrd/mch-{1}-{2}.rrd:AMC6curr12V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t7={0}rrd/mch-{1}-{2}.rrd:AMC7curr12V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t8={0}rrd/mch-{1}-{2}.rrd:AMC8curr12V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t9={0}rrd/mch-{1}-{2}.rrd:AMC9curr12V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t10={0}rrd/mch-{1}-{2}.rrd:AMC10curr12V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t11={0}rrd/mch-{1}-{2}.rrd:AMC11curr12V0:AVERAGE".format(filepath,rack,crate),
						     "DEF:t12={0}rrd/mch-{1}-{2}.rrd:AMC12curr12V0:AVERAGE".format(filepath,rack,crate),
						     "CDEF:t1cal=t1,1.88,/",
						     "CDEF:t2cal=t2,1.88,/",
						     "CDEF:t3cal=t3,1.88,/",
						     "CDEF:t4cal=t4,1.88,/",
						     "CDEF:t5cal=t5,1.88,/",
						     "CDEF:t6cal=t6,1.88,/",
						     "CDEF:t7cal=t7,1.88,/",
						     "CDEF:t8cal=t8,1.88,/",
						     "CDEF:t9cal=t9,1.88,/",
						     "CDEF:t10cal=t10,1.88,/",
						     "CDEF:t11cal=t11,1.88,/",
						     "CDEF:t12cal=t12,1.88,/",
						     "VDEF:t1avg=t1cal,LAST",
						     "VDEF:t2avg=t2cal,LAST",
						     "VDEF:t3avg=t3cal,LAST",
						     "VDEF:t4avg=t4cal,LAST",
						     "VDEF:t5avg=t5cal,LAST",
						     "VDEF:t6avg=t6cal,LAST",
						     "VDEF:t7avg=t7cal,LAST",
						     "VDEF:t8avg=t8cal,LAST",
						     "VDEF:t9avg=t9cal,LAST",
						     "VDEF:t10avg=t10cal,LAST",
						     "VDEF:t11avg=t11cal,LAST",
						     "VDEF:t12avg=t12cal,LAST",
						     "LINE:t1cal#000000:AMC1",
						     "GPRINT:t1avg:  %4.1lf %SA    ",
						     "LINE:t2cal#FF0000:AMC2",
						     "GPRINT:t2avg:  %4.1lf %SA    ",
						     "LINE:t3cal#FF6600:AMC3",
						     "GPRINT:t3avg:  %4.1lf %SA\l",
						     "LINE:t4cal#FFFF00:AMC4",
						     "GPRINT:t4avg:  %4.1lf %SA    ",
						     "LINE:t5cal#99CC00:AMC5",
						     "GPRINT:t5avg:  %4.1lf %SA    ",
						     "LINE:t6cal#00FF00:AMC6",
						     "GPRINT:t6avg:  %4.1lf %SA\l",
						     "LINE:t7cal#00CC99:AMC7",
						     "GPRINT:t7avg:  %4.1lf %SA    ",
						     "LINE:t8cal#0099CC:AMC8",
						     "GPRINT:t8avg:  %4.1lf %SA    ",
						     "LINE:t9cal#0000FF:AMC9",
						     "GPRINT:t9avg:  %4.1lf %SA\l",
						     "LINE:t10cal#6600FF:AMC10",
						     "GPRINT:t10avg:%2.1lf %SA  ",
						     "LINE:t11cal#FF00FF:AMC11",
						     "GPRINT:t11avg:%2.1lf %SA ",
						     "LINE:t12cal#FF0099:AMC12",
						     "GPRINT:t12avg:%2.1lf %SA")
				
				
				ret = rrdtool.graph( "{0}png/{1}-{2}-{3}-fmctemp.png".format(filepath, rack, crate, period), 
						     "--start", "-1{0}".format(period), 
						     "--vertical-label= Internal temperature (degC)",
						     "-w 400", "-h 200",
						     "--slope-mode",
						     #"--upper-limit=60.0", "--lower-limit=15.0","--rigid",
						     "-t Crate {0}-{1}".format(str.upper(rack), str.upper(crate)),
						     "DEF:t1={0}/rrd/amc-{1}-{2}-01.rrd:AMC1RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t2={0}/rrd/amc-{1}-{2}-01.rrd:AMC1RX2temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t3={0}/rrd/amc-{1}-{2}-02.rrd:AMC2RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t4={0}/rrd/amc-{1}-{2}-02.rrd:AMC2RX2temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t5={0}/rrd/amc-{1}-{2}-03.rrd:AMC3RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t6={0}/rrd/amc-{1}-{2}-03.rrd:AMC3RX2temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t7={0}/rrd/amc-{1}-{2}-04.rrd:AMC4RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t8={0}/rrd/amc-{1}-{2}-04.rrd:AMC4RX1temp:AVERAGE".format(filepath,rack,crate), 
						     "DEF:t9={0}/rrd/amc-{1}-{2}-05.rrd:AMC5RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t10={0}/rrd/amc-{1}-{2}-05.rrd:AMC5RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t11={0}/rrd/amc-{1}-{2}-06.rrd:AMC6RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t12={0}/rrd/amc-{1}-{2}-06.rrd:AMC6RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t13={0}/rrd/amc-{1}-{2}-07.rrd:AMC7RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t14={0}/rrd/amc-{1}-{2}-07.rrd:AMC7RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t15={0}/rrd/amc-{1}-{2}-08.rrd:AMC8RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t16={0}/rrd/amc-{1}-{2}-08.rrd:AMC8RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t17={0}/rrd/amc-{1}-{2}-09.rrd:AMC9RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t18={0}/rrd/amc-{1}-{2}-09.rrd:AMC9RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t19={0}/rrd/amc-{1}-{2}-10.rrd:AMC10RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t20={0}/rrd/amc-{1}-{2}-10.rrd:AMC10RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t21={0}/rrd/amc-{1}-{2}-11.rrd:AMC11RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t22={0}/rrd/amc-{1}-{2}-11.rrd:AMC11RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t23={0}/rrd/amc-{1}-{2}-12.rrd:AMC12RX1temp:AVERAGE".format(filepath,rack,crate),
						     "DEF:t24={0}/rrd/amc-{1}-{2}-12.rrd:AMC12RX1temp:AVERAGE".format(filepath,rack,crate),
						     "LINE:t1#000000:FMC1RX1",
						     "LINE:t2#000000:FMC1RX2",
						     "LINE:t3#FF0000:FMC2RX1",
						     "LINE:t4#FF0000:FMC2RX2",
						     "LINE:t5#FF6600:FMC3RX1",
						     "LINE:t6#FF6600:FMC3RX2",
						     "LINE:t7#FFFF00:FMC4RX1",
						     "LINE:t8#FFFF00:FMC4RX2",
						     "LINE:t9#00CC00:FMC5RX1",
						     "LINE:t10#00CC00:FMC5RX2",
						     "LINE:t11#00FF33:FMC6RX1",
						     "LINE:t12#00FF33:FMC6RX2",
						     "LINE:t13#33CC99:FMC7RX1",
						     "LINE:t14#33CC99:FMC7RX2",
						     "LINE:t15#7777FF:FMC8RX1",
						     "LINE:t16#7777FF:FMC8RX2",
						     "LINE:t17#0000FF:FMC9RX1",
						     "LINE:t18#0000FF:FMC9RX2",
						     "LINE:t19#7700EE:FMC10RX1",
						     "LINE:t20#7700EE:FMC10RX2",
						     "LINE:t21#FF00FF:FMC11RX1",
						     "LINE:t22#FF00FF:FMC11RX2",
						     "LINE:t23#FF1166:FMC12RX1",
						     "LINE:t24#FF1166:FMC12RX2")

				ret = rrdtool.graph( "{0}png/{1}-{2}-{3}-v1.png".format(filepath, rack, crate, period), 
						     "--start", "-1{0}".format(period), 
						     "--vertical-label= V1 (V) -> 3.3V  ",
						     "-w 400", "-h 200",
						     "--upper-limit=4.5", "--lower-limit=0.0","--rigid",
						     "-t Crate {0}-{1}".format(str.upper(rack), str.upper(crate)),
						     "DEF:t1={0}/rrd/amc-{1}-{2}-01.rrd:AMC1RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t2={0}/rrd/amc-{1}-{2}-01.rrd:AMC1RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t3={0}/rrd/amc-{1}-{2}-02.rrd:AMC2RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t4={0}/rrd/amc-{1}-{2}-02.rrd:AMC2RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t5={0}/rrd/amc-{1}-{2}-03.rrd:AMC3RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t6={0}/rrd/amc-{1}-{2}-03.rrd:AMC3RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t7={0}/rrd/amc-{1}-{2}-04.rrd:AMC4RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t8={0}/rrd/amc-{1}-{2}-04.rrd:AMC4RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t9={0}/rrd/amc-{1}-{2}-05.rrd:AMC5RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t10={0}/rrd/amc-{1}-{2}-05.rrd:AMC5RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t11={0}/rrd/amc-{1}-{2}-06.rrd:AMC6RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t12={0}/rrd/amc-{1}-{2}-06.rrd:AMC6RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t13={0}/rrd/amc-{1}-{2}-07.rrd:AMC7RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t15={0}/rrd/amc-{1}-{2}-07.rrd:AMC7RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t14={0}/rrd/amc-{1}-{2}-08.rrd:AMC8RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t16={0}/rrd/amc-{1}-{2}-08.rrd:AMC8RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t17={0}/rrd/amc-{1}-{2}-09.rrd:AMC9RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t18={0}/rrd/amc-{1}-{2}-09.rrd:AMC9RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t19={0}/rrd/amc-{1}-{2}-10.rrd:AMC10RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t20={0}/rrd/amc-{1}-{2}-10.rrd:AMC10RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t21={0}/rrd/amc-{1}-{2}-11.rrd:AMC11RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t22={0}/rrd/amc-{1}-{2}-11.rrd:AMC11RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t23={0}/rrd/amc-{1}-{2}-12.rrd:AMC12RX1V1:AVERAGE".format(filepath,rack,crate),
						     "DEF:t24={0}/rrd/amc-{1}-{2}-12.rrd:AMC12RX1V1:AVERAGE".format(filepath,rack,crate),
						     "LINE:t1#000000:FMC1RX1",
						     "LINE:t2#000000:FMC1RX2",
						     "LINE:t3#FF0000:FMC2RX1",
						     "LINE:t4#FF0000:FMC2RX2",
						     "LINE:t5#FF6600:FMC3RX1",
						     "LINE:t6#FF6600:FMC3RX2",
						     "LINE:t7#FFFF00:FMC4RX1",
						     "LINE:t8#FFFF00:FMC4RX2",
						     "LINE:t9#99CC00:FMC5RX1",
						     "LINE:t10#99CC00:FMC5RX2",
						     "LINE:t11#00FF00:FMC6RX1",
						     "LINE:t12#00FF00:FMC6RX2",
						     "LINE:t13#00CC99:FMC7RX1",
						     "LINE:t14#00CC99:FMC7RX2",
						     "LINE:t15#0099CC:FMC8RX1",
						     "LINE:t16#0099CC:FMC8RX2",
						     "LINE:t17#0000FF:FMC9RX1",
						     "LINE:t18#0000FF:FMC9RX2",
						     "LINE:t19#6600FF:FMC10RX1",
						     "LINE:t20#6600FF:FMC10RX2",
						     "LINE:t21#FF00FF:FMC11RX1",
						     "LINE:t22#FF00FF:FMC11RX2",
						     "LINE:t23#FF0099:FMC12RX1",
						     "LINE:t24#FF0099:FMC12RX2")

				ret = rrdtool.graph( "{0}png/{1}-{2}-{3}-v2.png".format(filepath, rack, crate, period), 
						     "--start", "-1{0}".format(period), 
						     "--vertical-label= V2 (V) -> 3.3V",
						     "-w 400", "-h 200",
						     "--upper-limit=4.5", "--lower-limit=0.0","--rigid",
						     "-t Crate {0}-{1}".format(str.upper(rack), str.upper(crate)),
						     "DEF:t1={0}/rrd/amc-{1}-{2}-01.rrd:AMC1RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t2={0}/rrd/amc-{1}-{2}-01.rrd:AMC1RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t3={0}/rrd/amc-{1}-{2}-02.rrd:AMC2RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t4={0}/rrd/amc-{1}-{2}-02.rrd:AMC2RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t5={0}/rrd/amc-{1}-{2}-03.rrd:AMC3RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t6={0}/rrd/amc-{1}-{2}-03.rrd:AMC3RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t7={0}/rrd/amc-{1}-{2}-04.rrd:AMC4RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t8={0}/rrd/amc-{1}-{2}-04.rrd:AMC4RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t9={0}/rrd/amc-{1}-{2}-05.rrd:AMC5RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t10={0}/rrd/amc-{1}-{2}-05.rrd:AMC5RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t11={0}/rrd/amc-{1}-{2}-06.rrd:AMC6RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t12={0}/rrd/amc-{1}-{2}-06.rrd:AMC6RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t13={0}/rrd/amc-{1}-{2}-07.rrd:AMC7RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t15={0}/rrd/amc-{1}-{2}-07.rrd:AMC7RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t14={0}/rrd/amc-{1}-{2}-08.rrd:AMC8RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t16={0}/rrd/amc-{1}-{2}-08.rrd:AMC8RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t17={0}/rrd/amc-{1}-{2}-09.rrd:AMC9RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t18={0}/rrd/amc-{1}-{2}-09.rrd:AMC9RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t19={0}/rrd/amc-{1}-{2}-10.rrd:AMC10RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t20={0}/rrd/amc-{1}-{2}-10.rrd:AMC10RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t21={0}/rrd/amc-{1}-{2}-11.rrd:AMC11RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t22={0}/rrd/amc-{1}-{2}-11.rrd:AMC11RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t23={0}/rrd/amc-{1}-{2}-12.rrd:AMC12RX1V2:AVERAGE".format(filepath,rack,crate),
						     "DEF:t24={0}/rrd/amc-{1}-{2}-12.rrd:AMC12RX1V2:AVERAGE".format(filepath,rack,crate),
						     "LINE:t1#000000:FMC1RX1",
						     "LINE:t2#000000:FMC1RX2",
						     "LINE:t3#FF0000:FMC2RX1",
						     "LINE:t4#FF0000:FMC2RX2",
						     "LINE:t5#FF6600:FMC3RX1",
						     "LINE:t6#FF6600:FMC3RX2",
						     "LINE:t7#FFFF00:FMC4RX1",
						     "LINE:t8#FFFF00:FMC4RX2",
						     "LINE:t9#99CC00:FMC5RX1",
						     "LINE:t10#99CC00:FMC5RX2",
						     "LINE:t11#00FF00:FMC6RX1",
						     "LINE:t12#00FF00:FMC6RX2",
						     "LINE:t13#00CC99:FMC7RX1",
						     "LINE:t14#00CC99:FMC7RX2",
						     "LINE:t15#0099CC:FMC8RX1",
						     "LINE:t16#0099CC:FMC8RX2",
						     "LINE:t17#0000FF:FMC9RX1",
						     "LINE:t18#0000FF:FMC9RX2",
						     "LINE:t19#6600FF:FMC10RX1",
						     "LINE:t20#6600FF:FMC10RX2",
						     "LINE:t21#FF00FF:FMC11RX1",
						     "LINE:t22#FF00FF:FMC11RX2",
						     "LINE:t23#FF0099:FMC12RX1",
						     "LINE:t24#FF0099:FMC12RX2")

				ret = rrdtool.graph( "{0}png/{1}-{2}-{3}-v3.png".format(filepath, rack,  crate, period), 
						     "--start", "-1{0}".format(period), 
						     "--vertical-label= V3 (V) -> RSSI",
						     "-w 400", "-h 200",
						     "--upper-limit=4.5", "--lower-limit=0.0","--rigid",
						     "-t Crate {0}-{1}".format(str.upper(rack), str.upper(crate)),
						     "DEF:t1={0}/rrd/amc-{1}-{2}-01.rrd:AMC1RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t2={0}/rrd/amc-{1}-{2}-01.rrd:AMC1RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t3={0}/rrd/amc-{1}-{2}-02.rrd:AMC2RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t4={0}/rrd/amc-{1}-{2}-02.rrd:AMC2RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t5={0}/rrd/amc-{1}-{2}-03.rrd:AMC3RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t6={0}/rrd/amc-{1}-{2}-03.rrd:AMC3RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t7={0}/rrd/amc-{1}-{2}-04.rrd:AMC4RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t8={0}/rrd/amc-{1}-{2}-04.rrd:AMC4RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t9={0}/rrd/amc-{1}-{2}-05.rrd:AMC5RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t10={0}/rrd/amc-{1}-{2}-05.rrd:AMC5RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t11={0}/rrd/amc-{1}-{2}-06.rrd:AMC6RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t12={0}/rrd/amc-{1}-{2}-06.rrd:AMC6RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t13={0}/rrd/amc-{1}-{2}-07.rrd:AMC7RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t15={0}/rrd/amc-{1}-{2}-07.rrd:AMC7RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t14={0}/rrd/amc-{1}-{2}-08.rrd:AMC8RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t16={0}/rrd/amc-{1}-{2}-08.rrd:AMC8RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t17={0}/rrd/amc-{1}-{2}-09.rrd:AMC9RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t18={0}/rrd/amc-{1}-{2}-09.rrd:AMC9RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t19={0}/rrd/amc-{1}-{2}-10.rrd:AMC10RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t20={0}/rrd/amc-{1}-{2}-10.rrd:AMC10RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t21={0}/rrd/amc-{1}-{2}-11.rrd:AMC11RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t22={0}/rrd/amc-{1}-{2}-11.rrd:AMC11RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t23={0}/rrd/amc-{1}-{2}-12.rrd:AMC12RX1V3:AVERAGE".format(filepath,rack,crate),
						     "DEF:t24={0}/rrd/amc-{1}-{2}-12.rrd:AMC12RX1V3:AVERAGE".format(filepath,rack,crate),
						     "LINE:t1#000000:FMC1RX1",
						     "LINE:t2#000000:FMC1RX2",
						     "LINE:t3#FF0000:FMC2RX1",
						     "LINE:t4#FF0000:FMC2RX2",
						     "LINE:t5#FF6600:FMC3RX1",
						     "LINE:t6#FF6600:FMC3RX2",
						     "LINE:t7#FFFF00:FMC4RX1",
						     "LINE:t8#FFFF00:FMC4RX2",
						     "LINE:t9#99CC00:FMC5RX1",
						     "LINE:t10#99CC00:FMC5RX2",
						     "LINE:t11#00FF00:FMC6RX1",
						     "LINE:t12#00FF00:FMC6RX2",
						     "LINE:t13#00CC99:FMC7RX1",
						     "LINE:t14#00CC99:FMC7RX2",
						     "LINE:t15#0099CC:FMC8RX1",
						     "LINE:t16#0099CC:FMC8RX2",
						     "LINE:t17#0000FF:FMC9RX1",
						     "LINE:t18#0000FF:FMC9RX2",
						     "LINE:t19#6600FF:FMC10RX1",
						     "LINE:t20#6600FF:FMC10RX2",
						     "LINE:t21#FF00FF:FMC11RX1",
						     "LINE:t22#FF00FF:FMC11RX2",
						     "LINE:t23#FF0099:FMC12RX1",
						     "LINE:t24#FF0099:FMC12RX2")
				
				ret = rrdtool.graph( "{0}png/{1}-{2}-{3}-v4.png".format(filepath, rack, crate, period), 
						     "--start", "-1{0}".format(period), 
						     "--vertical-label= V4 (V) -> GND",
						     "-w 400", "-h 200",
						     #"--upper-limit=4.5", "--lower-limit=0.0","--rigid",
						     "-t Crate {0}-{1}".format(str.upper(rack), str.upper(crate)),
						     "DEF:t1={0}/rrd/amc-{1}-{2}-01.rrd:AMC1RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t2={0}/rrd/amc-{1}-{2}-01.rrd:AMC1RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t3={0}/rrd/amc-{1}-{2}-02.rrd:AMC2RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t4={0}/rrd/amc-{1}-{2}-02.rrd:AMC2RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t5={0}/rrd/amc-{1}-{2}-03.rrd:AMC3RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t6={0}/rrd/amc-{1}-{2}-03.rrd:AMC3RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t7={0}/rrd/amc-{1}-{2}-04.rrd:AMC4RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t8={0}/rrd/amc-{1}-{2}-04.rrd:AMC4RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t9={0}/rrd/amc-{1}-{2}-05.rrd:AMC5RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t10={0}/rrd/amc-{1}-{2}-05.rrd:AMC5RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t11={0}/rrd/amc-{1}-{2}-06.rrd:AMC6RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t12={0}/rrd/amc-{1}-{2}-06.rrd:AMC6RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t13={0}/rrd/amc-{1}-{2}-07.rrd:AMC7RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t15={0}/rrd/amc-{1}-{2}-07.rrd:AMC7RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t14={0}/rrd/amc-{1}-{2}-08.rrd:AMC8RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t16={0}/rrd/amc-{1}-{2}-08.rrd:AMC8RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t17={0}/rrd/amc-{1}-{2}-09.rrd:AMC9RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t18={0}/rrd/amc-{1}-{2}-09.rrd:AMC9RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t19={0}/rrd/amc-{1}-{2}-10.rrd:AMC10RX1V4:AVERAGE".format(filepath,rack,crate),
						     "DEF:t20={0}/rrd/amc-{1}-{2}-10.rrd:AMC10RX1V4:AVERAGE".format(filepath, rack,crate),
						     "DEF:t21={0}/rrd/amc-{1}-{2}-11.rrd:AMC11RX1V4:AVERAGE".format(filepath, rack,crate),
						     "DEF:t22={0}/rrd/amc-{1}-{2}-11.rrd:AMC11RX1V4:AVERAGE".format(filepath, rack,crate),
						     "DEF:t23={0}/rrd/amc-{1}-{2}-12.rrd:AMC12RX1V4:AVERAGE".format(filepath, rack,crate),
						     "DEF:t24={0}/rrd/amc-{1}-{2}-12.rrd:AMC12RX1V4:AVERAGE".format(filepath, rack,crate),
						     "LINE:t1#000000:FMC1RX1",
						     "LINE:t2#000000:FMC1RX2",
						     "LINE:t3#FF0000:FMC2RX1",
						     "LINE:t4#FF0000:FMC2RX2",
						     "LINE:t5#FF6600:FMC3RX1",
						     "LINE:t6#FF6600:FMC3RX2",
						     "LINE:t7#FFFF00:FMC4RX1",
						     "LINE:t8#FFFF00:FMC4RX2",
						     "LINE:t9#99CC00:FMC5RX1",
						     "LINE:t10#99CC00:FMC5RX2",
						     "LINE:t11#00FF00:FMC6RX1",
						     "LINE:t12#00FF00:FMC6RX2",
						     "LINE:t13#00CC99:FMC7RX1",
						     "LINE:t14#00CC99:FMC7RX2",
						     "LINE:t15#0099CC:FMC8RX1",
						     "LINE:t16#0099CC:FMC8RX2",
						     "LINE:t17#0000FF:FMC9RX1",
						     "LINE:t18#0000FF:FMC9RX2",
						     "LINE:t19#6600FF:FMC10RX1",
						     "LINE:t20#6600FF:FMC10RX2",
						     "LINE:t21#FF00FF:FMC11RX1",
						     "LINE:t22#FF00FF:FMC11RX2",
						     "LINE:t23#FF0099:FMC12RX1",
						     "LINE:t24#FF0099:FMC12RX2")

				ret = rrdtool.graph( "{0}png/{1}-{2}-{3}-vcc.png".format(filepath, rack, crate, period), 
						     "--start", "-1{0}".format(period), 
						     "--vertical-label= V5 (V) -> VCC ",
						     "-w 400", "-h 200",
						     "--upper-limit=4.5", "--lower-limit=0.0","--rigid",
						     "-t Crate {0}-{1}".format(str.upper(rack), str.upper(crate)),
						     "DEF:t1={0}/rrd/amc-{1}-{2}-01.rrd:AMC1RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t2={0}/rrd/amc-{1}-{2}-01.rrd:AMC1RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t3={0}/rrd/amc-{1}-{2}-02.rrd:AMC2RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t4={0}/rrd/amc-{1}-{2}-02.rrd:AMC2RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t5={0}/rrd/amc-{1}-{2}-03.rrd:AMC3RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t6={0}/rrd/amc-{1}-{2}-03.rrd:AMC3RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t7={0}/rrd/amc-{1}-{2}-04.rrd:AMC4RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t8={0}/rrd/amc-{1}-{2}-04.rrd:AMC4RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t9={0}/rrd/amc-{1}-{2}-05.rrd:AMC5RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t10={0}/rrd/amc-{1}-{2}-05.rrd:AMC5RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t11={0}/rrd/amc-{1}-{2}-06.rrd:AMC6RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t12={0}/rrd/amc-{1}-{2}-06.rrd:AMC6RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t13={0}/rrd/amc-{1}-{2}-07.rrd:AMC7RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t15={0}/rrd/amc-{1}-{2}-07.rrd:AMC7RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t14={0}/rrd/amc-{1}-{2}-08.rrd:AMC8RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t16={0}/rrd/amc-{1}-{2}-08.rrd:AMC8RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t17={0}/rrd/amc-{1}-{2}-09.rrd:AMC9RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t18={0}/rrd/amc-{1}-{2}-09.rrd:AMC9RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t19={0}/rrd/amc-{1}-{2}-10.rrd:AMC10RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t20={0}/rrd/amc-{1}-{2}-10.rrd:AMC10RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t21={0}/rrd/amc-{1}-{2}-11.rrd:AMC11RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t22={0}/rrd/amc-{1}-{2}-11.rrd:AMC11RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t23={0}/rrd/amc-{1}-{2}-12.rrd:AMC12RX1VCC:AVERAGE".format(filepath, rack,crate),
						     "DEF:t24={0}/rrd/amc-{1}-{2}-12.rrd:AMC12RX1VCC:AVERAGE".format(filepath, rack, crate),
						     "LINE:t1#000000:FMC1RX1",
						     "LINE:t2#000000:FMC1RX2",
						     "LINE:t3#FF0000:FMC2RX1",
						     "LINE:t4#FF0000:FMC2RX2",
						     "LINE:t5#FF6600:FMC3RX1",
						     "LINE:t6#FF6600:FMC3RX2",
						     "LINE:t7#FFFF00:FMC4RX1",
						     "LINE:t8#FFFF00:FMC4RX2",
						     "LINE:t9#99CC00:FMC5RX1",
						     "LINE:t10#99CC00:FMC5RX2",
						     "LINE:t11#00FF00:FMC6RX1",
						     "LINE:t12#00FF00:FMC6RX2",
						     "LINE:t13#00CC99:FMC7RX1",
						     "LINE:t14#00CC99:FMC7RX2",
						     "LINE:t15#0099CC:FMC8RX1",
						     "LINE:t16#0099CC:FMC8RX2",
						     "LINE:t17#0000FF:FMC9RX1",
						     "LINE:t18#0000FF:FMC9RX2",
						     "LINE:t19#6600FF:FMC10RX1",
						     "LINE:t20#6600FF:FMC10RX2",
						     "LINE:t21#FF00FF:FMC11RX1",
						     "LINE:t22#FF00FF:FMC11RX2",
						     "LINE:t23#FF0099:FMC12RX1",
						     "LINE:t24#FF0099:FMC12RX2")
                               
                                           
                                             
			                                   
